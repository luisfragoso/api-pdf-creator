# Copia este archivo a .env (NO lo subas al repositorio)
# Ejemplo: cp .env.example .env

# Nombre del proyecto para Docker Compose (afecta nombres de contenedores/redes)
COMPOSE_PROJECT_NAME=api-pdf-creator

# Dominio/subdominio público donde se expondrá la API (Caddy usará Let's Encrypt)
# Ej: pdf.tudominio.com
DOMAIN=pdf.tudominio.com

# Email para Let's Encrypt (ACME)
ACME_EMAIL=tu-correo@tudominio.com

# Límites del proxy (antes de llegar a la app)
# Ejemplos: 2MB, 5MB, 10MB
PROXY_MAX_BODY=5MB

# Timeouts del proxy
PROXY_READ_TIMEOUT=30s
PROXY_WRITE_TIMEOUT=30s

# Nivel de logs de la API (INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Render Chromium (Playwright)
# Controla el viewport y el tamaño del PDF en modo "screen".
PDF_VIEWPORT_WIDTH=1400
PDF_VIEWPORT_HEIGHT=900
# Opcional: fuerza el tamaño del PDF en px (si está vacío se calcula height=scrollHeight)
PDF_OUTPUT_WIDTH=
PDF_OUTPUT_HEIGHT=

# Si es 1, reutiliza Chromium entre requests (mejor performance).
# Recomendado si tu carga es alta.
CHROMIUM_PERSISTENT=0

# Si CHROMIUM_PERSISTENT=1, reinicia Chromium cada N renders para evitar degradación.
# 0 desactiva.
CHROMIUM_RESTART_AFTER=0

# Timeout (segundos) del endpoint /health/deep. El código aplica un mínimo seguro.
HEALTH_DEEP_TIMEOUT_SECONDS=15

# Forzar colores exactos tipo impresión (inyecta print-color-adjust).
FORCE_EXACT_COLORS=0

# Tokens separados por coma.
# Tokens normales: pueden generar PDF, pero NO pueden cargar recursos remotos (http/https).
PDF_API_KEYS=client-token-1,client-token-2

# Tokens con permiso para recursos remotos.
# Reglas: solo HTTPS + solo hosts en ALLOWED_REMOTE_HOSTS + bloqueo de IPs privadas/localhost.
PDF_REMOTE_API_KEYS=remote-token-1

# Lista de hosts permitidos para recursos remotos (sin esquema, sin paths), separados por coma.
# Ej: cdn.tudominio.com,images.tudominio.com
ALLOWED_REMOTE_HOSTS=cdn.tudominio.com,images.tudominio.com

# (Opcional) Regex allow/deny de URLs remotas (además de ALLOWED_REMOTE_HOSTS).
# Si ALLOWED_REMOTE_URL_REGEX está definido, la URL debe hacer match.
ALLOWED_REMOTE_URL_REGEX=
# Si DENIED_REMOTE_URL_REGEX hace match, se bloquea.
DENIED_REMOTE_URL_REGEX=

# Límite máximo de tamaño del HTML (bytes). 2000000 ~ 2MB
MAX_HTML_BYTES=2000000

# Timeout de generación de PDF a nivel aplicación
RENDER_TIMEOUT_SECONDS=30

# Concurrencia interna (threads) para generar PDFs y jobs
WORKERS=2

# Backpressure: número máximo de renders en cola (además de WORKERS ejecutando).
# 0 desactiva el límite.
MAX_RENDER_QUEUE=0

# Si es 1, fallar si algún recurso (CSS/IMG/JS) falla o devuelve HTTP >= 400.
REMOTE_STRICT_RESOURCES=0

# (Opcional) Ignorar ciertos dominios para el check de HTTP status de recursos.
# Ej: fonts.googleapis.com,fonts.gstatic.com
RESOURCE_STATUS_IGNORE_DOMAINS=

# Rate limit por token (requests por minuto). 0 desactiva.
RATE_LIMIT_NORMAL_PER_MIN=60
RATE_LIMIT_REMOTE_PER_MIN=20

# TTL de jobs en memoria (segundos). 0 desactiva limpieza automática.
JOBS_TTL_SECONDS=900
